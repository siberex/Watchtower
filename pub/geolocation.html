<!DOCTYPE html> 
<html> 
<head> 
<meta name="viewport" content="initial-scale=1.0, user-scalable=no"/> 
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/> 
<title>Geolocation test</title> 

<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false&language=en"></script>
<script type="text/javascript"> 
var geocoder;
if (navigator.geolocation) {
	navigator.geolocation.getCurrentPosition(
		function(position) {
			var lat = position.coords.latitude;
			var lng = position.coords.longitude;

			var latlng = new google.maps.LatLng(lat, lng);

			if (typeof geocoder == "undefined")
				geocoder = new google.maps.Geocoder();

			geocoder.geocode({'latLng': latlng}, function(results, status) {
				if (status == google.maps.GeocoderStatus.OK) {
					var country = false, city = false;
					var cities = [];
					var re = /administrative_area_level_(\d+)/ig;

					if (results[0]) {
						for (var i in results) {
							var res = results[i];

							for (var c in res['address_components']) {
								var comp = res['address_components'][c];

								if (!country && comp.types[0] == "country") {
									country = comp['short_name'];
								}

								var found = re.exec(comp.types[0]);
								if (found) {
									if (found[0] == "locality")
										cities[0] = comp['short_name'];
									else
										cities[ parseInt(found[1]) ] = comp['short_name'];
								}
							}
						}

						city = cities.pop();
						alert(city + ' (' + country + ')');

					} else {
						alert('No results found');
					}
				} else {
					alert("Geocoder failed due to: " + status);
				}
			});

		},
		function() {
			// geocoder failed.
		}
	);
}
</script>
</head> 
<body> 
This page will try to determine your city with HTML 5 Geolocation API.
<br /><br />
‚Üê <a href="http://www.sib.li">Stephan Legachev</a>
</body> 
</html>